<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Food for Thought Expected</title>
    <description>while [ &#39;alive&#39; ]; do think &amp;&amp; act | tee blog; done</description>
    <link>http://l.duitang.com/</link>
    <atom:link href="http://l.duitang.com/feed.xml" rel="self" type="application/rss+xml"/>
    <pubDate>Sat, 03 Sep 2016 01:03:21 +0800</pubDate>
    <lastBuildDate>Sat, 03 Sep 2016 01:03:21 +0800</lastBuildDate>
    <generator>Jekyll v3.1.6</generator>
    
      <item>
        <title>“阿法狗”的武功秘籍</title>
        <description>&lt;p&gt;5月，下围棋的阿法狗，用战胜李世石霸占了我的头条，这两天，会美图的“阿法狗”，开始入侵我的相册，名字不土了，叫Prisma，挺秀气。&lt;/p&gt;

&lt;p&gt;先来感受下她的画风。呃，准确来说，是凡高风，毕加索风，列维坦风……&lt;/p&gt;

&lt;p&gt;随手拍一张：&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/201607/alphago1-1.webp&quot; alt=&quot;image-title-here&quot; class=&quot;img-responsive&quot; /&gt;&lt;/p&gt;

&lt;p&gt;选择“Candy”派，变酱紫，挂在画展里也毫无违和感。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/201607/alphago1-2.webp&quot; alt=&quot;image-title-here&quot; class=&quot;img-responsive&quot; /&gt;&lt;/p&gt;

&lt;p&gt;换个“wave”风看看：&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/201607/alphago1-3.webp&quot; alt=&quot;image-title-here&quot; class=&quot;img-responsive&quot; /&gt;&lt;/p&gt;

&lt;p&gt;拿来装逼，不会有被雷劈的风险。&lt;/p&gt;

&lt;p&gt;“我们会像一名真正的艺术家一样重新创作”，创始人Alexey说。据说，和凡老，毕老比起来，他们的创作速度快得不只一点点，秒秒钟搞定一幅艺术品。激动地试了下，然并卵，来自网络错误和服务器繁忙的硬伤不下50点。一张图片跨越万水千山终于到达远在俄罗斯的服务器，却被礼貌地告知已经人满为患，请再跑一趟。&lt;/p&gt;

&lt;p&gt;想想创作总是艰难的，也就原谅他们了，尤其这等上乘功夫，一群内功深厚的服务器合力方能驾驭，远非势单力薄的手机所能修炼。&lt;/p&gt;

&lt;p&gt;可等待也是艰难的，排队的时候，做点什么呢？不如扒一扒这位俄罗斯大师的秘籍吧。她量产艺术品的过程是，从经典的画作中提炼画风，再分析用户上传的照片，两个结合，duang，一幅全新的作品诞生了。和阿法狗相似的地方在于，她们都修炼了一种深度学习算法，卷积神经网络。&lt;/p&gt;

&lt;p&gt;卷积神经网络，没有金庸”八荒六合唯我独尊功”式的朗朗上口，却不妨碍我们窥探其奥秘，下面就翻一翻这本秘籍。&lt;/p&gt;

&lt;p&gt;开篇第一式，卷积。&lt;/p&gt;

&lt;p&gt;要修炼卷积，必须酒足饭饱。每次修炼前，得先查下胃。饱餐一顿后，肚子里剩余的食物量在慢慢减少，这个过程可以表示为：&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/201607/alphago1-4.webp&quot; alt=&quot;image-title-here&quot; class=&quot;img-responsive&quot; /&gt;&lt;/p&gt;

&lt;p&gt;差不多五个小时，肚子里的东西就消化完了。如果练功偷懒，体能消耗慢一些，也可能是六小时，七小时。&lt;/p&gt;

&lt;p&gt;不管怎样，为了早日修成此功，你三餐不落，早上7点，中午12点和晚上6点，各吃了一顿，只是量稍有不同，也用一张图表示：&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/201607/alphago1-5.webp&quot; alt=&quot;image-title-here&quot; class=&quot;img-responsive&quot; /&gt;&lt;/p&gt;

&lt;p&gt;肚子里剩余的食物就是前面没消化完的，和时间的关系可以表示为：&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/201607/alphago1-6.webp&quot; alt=&quot;image-title-here&quot; class=&quot;img-responsive&quot; /&gt;&lt;/p&gt;

&lt;p&gt;当然，练功偷懒的人，耗能少，上一顿没消化完就吃下一顿了，曲线就变成这样：&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/201607/alphago1-7.webp&quot; alt=&quot;image-title-here&quot; class=&quot;img-responsive&quot; /&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;师傅，我吃饱了，咱开始教招式吧。&lt;br /&gt;
我已经讲了。&lt;br /&gt;
可，明明只说了吃饭。&lt;br /&gt;
招式就在饭里。&lt;br /&gt;
……&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;要练成第一式，吃饭除了要准时，姿势也很重要。不论是狼吞虎咽，还是细嚼慢咽，只要是相同的吃法，都要有相同的消化法，要切换自如，还要能叠加，这叫“线性”。无论是中午吃，还是晚上吃，时间虽不同，只要吃法一致，消化方式也必须一致，这叫“时不变”。&lt;/p&gt;

&lt;p&gt;达到这一境界，便练成了第一式。对于这样的肠胃（线性时不变系统），消化快慢的规律，叫“冲激响应”，取决于修炼者的身体情况，三餐吃的饭量是“输入”，肚子里剩余的食物量是“输出”。输出和输入的关系就叫“卷积”，函数f和h的卷积写成：&lt;/p&gt;

&lt;center&gt;h (x) = f ⊗ g  &lt;/center&gt;
&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;“可是，画画涉及的是图形图像处理，和“吃饭”如何能联系在一起呢？”&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;吃饭的过程也可以理解为，根据特定的规律（消化），把若干份不同的信息（饭）混合的过程。图片是长宽固定的像素矩阵，它本身就是一份信息。和谁混合呢？我们人为制造的另外一个矩阵（卷积核），具体什么样的矩阵取决于我们需要达到什么样的目的。混合后得到的，就是机器学习里经常提到的“特征”。&lt;/p&gt;

&lt;center&gt;feature map = input ⊗ kernel  &lt;/center&gt;
&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;比如，我们想保留图片内物体的轮廓，去除颜色，就可以这样：&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/201607/alphago1-8.webp&quot; alt=&quot;image-title-here&quot; class=&quot;img-responsive&quot; /&gt;&lt;/p&gt;

&lt;p&gt;当然，细节要比这个复杂一些，并不是直接用整个图片矩阵计算，而是逐一滑动窗口计算，注意看动图：&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/201607/alphago1-9.gif&quot; alt=&quot;image-title-here&quot; class=&quot;img-responsive&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;“咦，上面说的明明是卷积，这张图里怎么是乘积呢？”&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;问得好（眼太尖），但是要回答好可不容易。肚子里剩余食物显然是随时间的变化而变化的，这种变化是发生在“时域”上的。图片在采集特征之前，做了傅里叶变换，从时域转到了频域，而时域上的卷积就是频域上的乘积。因此，处理图片时的乘积和吃饭时的卷积，不仅不矛盾，而且在本质上是一回事。&lt;/p&gt;

&lt;p&gt;&lt;em&gt;“傅里叶变换是个什么鬼？”&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;傅里叶变换，卷积的姊妹心法，20世纪最重要的公式，之一，一旦掌握，卷积大法也就指日可待。傅的名声大噪，在于它是众多其它法门的基础，犹如小无相功，可催动少林七十二门绝技。&lt;/p&gt;

&lt;p&gt;&lt;em&gt;“这么牛逼，赶紧讲讲。”&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;没问题，只是这里篇幅太小（能力有限），施展不开（讲不清楚），还请移步知乎，看韩昊对此所做的精妙阐述。&lt;/p&gt;

&lt;p&gt;咱们还是回来继续撸卷积。Kaggle——机器学习界的少林寺，流行这么个说法：&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Feature engineering is the most important skill to score well in competitions.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;em&gt;“用人话讲就是，特征定得了，功夫才能好。”&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;没错，异于其它事物的任何属性都是特征，轮廓，颜色，亮度，质地……凡老，毕老的画各有特点，他们的画风就是众多特征的集合。图片和卷积核运算后，去除了无关的信息，只留下这个核关心的信息，从这个角度看，卷积核就是筛子。构造足够多这样的筛子，就可以量化地取得很多特征。看似只可意会，不可言传的“画风”，卷积大法一出，便手到擒来。&lt;/p&gt;

&lt;p&gt;&lt;em&gt;“吹牛，若真这么简单，论资排辈，也轮不到看特征了。”&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;嗬，变聪明了嘛。构造合适的卷积核，颇费脑筋，怎么办？让机器自动帮我们选择合适的卷积核。具体如何操练？且看下回，神功第二式——神经网络。&lt;/p&gt;
</description>
        <pubDate>Mon, 25 Jul 2016 13:04:07 +0800</pubDate>
        <link>http://l.duitang.com/machine-learning/2016/07/25/alphago-kungfu-1.html</link>
        <guid isPermaLink="true">http://l.duitang.com/machine-learning/2016/07/25/alphago-kungfu-1.html</guid>
        
        
        <category>machine-learning</category>
        
      </item>
    
      <item>
        <title>魔都有多少喵星人？</title>
        <description>&lt;p&gt;据说曾经有位西方记者问周总理，中国有多少厕所，周总理回答有两个，男厕所和女厕所。很机智，但也回避了这个问题。今天我们不回避，来聊了聊一个类似的问题，魔都有多少只猫。&lt;/p&gt;

&lt;p&gt;问题很刁钻，看着又有几分眼熟，“全世界共有多少名钢琴调音师？”，“多少只高尔夫球才能填满一辆校车？”，没错，这是谷歌等公司在面试时喜欢问的问题。&lt;/p&gt;

&lt;p&gt;这么问，大概不是为了碾压智商的，即使最聪明的人，也无法准确说出这些数字。开放性问题很友善，谁都能给出答案，又绵里藏针，因为对思维品质的要求很高，要在短时间内给出有理有据的回答，相当困难。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;化整为零，各个击破&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;费米是回答这类问题的大师。1945年的7月16号，内华达的沙漠深处，美国人傲骄地试爆了第一颗原子弹，远离爆点的基地里，工程师们紧张地盯着繁忙的仪表，忙得不可开交。一旁的费米，作为“曼哈顿计划”的主要领导者，却闲庭信步，玩起了撕纸片游戏，把纸片撕碎，然后扔向天空，如是几次之后，沉吟片刻，轻描淡写的说道，爆炸当量大概相当于1万吨TNT。而精确计算后的爆炸当量是2万吨TNT，只差1倍。上一刻还在各种忙乱的大家，此刻怀着错愕的心情，转入计算内心的受伤面积，“how do you know by…”。费米淡淡一笑，并没有回答，引发了几十年后Quora和果壳上的种种猜测。&lt;/p&gt;

&lt;p&gt;没有直接答案，但费米在后来的执教中留下了回答这类问题的一般性思路，Fermi-ize。&lt;/p&gt;

&lt;p&gt;这类问题通常涉及我们不熟悉的领域，或在尺度上非日常生活所能感知。直接回答，困难重重，即使答得精确，也难以让人信服。因此，第一步是化整为零，各个击破（divide and conquer）。大问题分解成小问题，混沌状态分解成已知部分和未知部分。取决于对问题领域的了解程度，可能仍然摆脱不了猜测的成分。但不同的是，此时不再是一个黑盒子，而是把其中的一个量从盒子里拖了出来，有更大的概率取得更为准确的估计。当然，在这一过程中，仍然需要鼓起勇气，克服对陌生领域的恐惧，大胆地说出我们的假设和估计，并且承认结果依然可能是错的。快速发现错误，逐步迭代，比把它掩藏起来要好得多。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;用树形解构问题&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;用顺序表述的文字来描述分解和分析的过程，隐藏了子问题层级结构，面对复杂问题时便不那么直观。The Art of Insight in Science and Engineering（以下简称the art）一书中提出了树形分解法（tree presentation）。简单的问题，如“每天北京到上海的铁路客运量有多少”，可以表示为：&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/201607/cat-1.jpg&quot; alt=&quot;image-title-here&quot; class=&quot;img-responsive&quot; /&gt;&lt;/p&gt;

&lt;p&gt;稍微复杂一点的，如“一张纸的体积有多少？”，可以表示为：&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/201607/cat-2.jpg&quot; alt=&quot;image-title-here&quot; class=&quot;img-responsive&quot; /&gt;&lt;/p&gt;

&lt;p&gt;其中ream（令）有500张纸，-1表示倒数。一张纸的体积很难估算，分解为相对容易估算的长度，宽度，一张纸的厚度不好估计，500张好估计多了，所以，可以把厚度再次做分解。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/201607/cat-3.jpg&quot; alt=&quot;image-title-here&quot; class=&quot;img-responsive&quot; /&gt;&lt;/p&gt;

&lt;p&gt;分解到什么程度适合呢？到你对估算的准度有较大把握时即可。比如上面的纸张体积问题，也许对于有些人（如造纸厂的工人），一张纸的厚度，已经可以直接估算了。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;依靠直觉估算&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;树形分解时，对叶子节点的估算有时不得不依靠直觉。直觉的合理性一定程度上决定了整个估算的准确性，因此有必要讨论下如何提高直觉的合理性。中学课堂上教的多次测量取平均值不失为一种方式。但考虑到平均值比较容易受极值的影响。&lt;/p&gt;

&lt;p&gt;the art中提出了几何平均的方式。并且，不是直接依赖直觉给出数值，而是考虑到右脑的特点，用问的方式来间接逼近。如，估算上海市的平均人口密度，从一个极限值开始，逐步向另一个权限靠近，如高于1000平米／人都是你直觉上判断不太可能的，那么记下1000这个数值。逐步向下，直到一个很小的数值，如低于50平米／人后，直觉上会说，局部地区也许会达到或低于50平米一个人，但整个市平均这么低，可能性很低，所以最终给出的平均值应该是sqrt(50*1000)，即223.6平米／人，或者说4472人／平方公里。这和2010年人口普查时的3631人／平方公里相差不远。&lt;/p&gt;

&lt;p&gt;要选择合适的单位进行估算。对我的直觉来说，每人占多少平米比每平方公里多少人更容易估计，因此我选择前者为单位，而不是后者。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;蒙特卡罗方法&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;有些领域在生活中几乎不会涉及，毫无直觉可言。比如圆周率π，大概没有人能凭直觉说出它约为3.14吧。这时候，需要直觉之外的方法。同样是在“曼哈顿计划”，S.M.乌拉姆和冯·诺伊曼提出了蒙特卡罗方法。其原理是通过大量随机试验，统计样本，计算所需要的值。&lt;/p&gt;

&lt;p&gt;用蒙特卡罗方法估算π可以这么做。在正方形内部画一个相切的圆，那么，它们的面积之比是π/4（π*r^2/(2*r)^2）。在这个正方形内部，随机产生10000个点，计算它们与中心点的距离，从而判断是否落在圆的内部。如果这些点均匀分布，那么圆内的点应该占到所有点的 π/4，因此将这个比值乘以4，就是π的值。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/201607/cat-4.jpg&quot; alt=&quot;image-title-here&quot; class=&quot;img-responsive&quot; /&gt;&lt;/p&gt;

&lt;p&gt;回到开头的问题，魔都有多少喵星人？&lt;/p&gt;

&lt;p&gt;我们可以利用上面的树形分解和直觉估算法进行估计。因为问题结构比较清晰，可以在脑子里迅速画出树形图。野生的和家养的在数量上相差不大，因此总数应该是后者的两倍。上海市2300万人（常识，差不离即可，如果缺乏这个常识，则利用上面的人口密度估算）, 由于上海市的生育水平较低，同时存在大量外来人口和单身年轻人，因此家庭的平均人口应该比较低，大概2.2人一个家庭，通过对身边朋友同事的不完全采样，以及直觉估算，得出全市家庭的养猫概率应该是5%左右，这样算下来，大概有2&lt;em&gt;23000000&lt;/em&gt;1/2.2*0.05，即104万只猫生活在魔都。&lt;/p&gt;
</description>
        <pubDate>Mon, 18 Jul 2016 12:15:09 +0800</pubDate>
        <link>http://l.duitang.com/math/2016/07/18/number-of-cats-in-shanghai.html</link>
        <guid isPermaLink="true">http://l.duitang.com/math/2016/07/18/number-of-cats-in-shanghai.html</guid>
        
        
        <category>math</category>
        
      </item>
    
  </channel>
</rss>
